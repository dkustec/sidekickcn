{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "sidekick-sidebar",
  "type": "registry:component",
  "title": "sidekick/cn Sliding Sidebar",
  "description": "Chrome extension-style sliding sidebar that wraps content with search bar and smooth animations",
  "dependencies": [
    "lucide-react",
    "motion"
  ],
  "registryDependencies": [
    "button",
    "input",
    "scroll-area",
    "/r/sidekick-provider.json",
    "/r/ai-elements-message.json",
    "/r/ai-elements-prompt-input.json",
    "/r/ai-elements-shimmer.json"
  ],
  "files": [
    {
      "path": "src/components/sidekick/sidekick-sidebar.tsx",
      "content": "\"use client\";\n\nimport {\n  Message,\n  MessageContent,\n  MessageResponse,\n} from \"@/components/ai-elements/message\";\nimport {\n  PromptInput,\n  PromptInputBody,\n  PromptInputFooter,\n  PromptInputSubmit,\n  PromptInputTextarea,\n  PromptInputTools,\n} from \"@/components/ai-elements/prompt-input\";\nimport { ShimmerLines } from \"@/components/ai-elements/shimmer\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { cn } from \"@/lib/utils\";\nimport { PanelRightIcon, SearchIcon, X } from \"lucide-react\";\nimport { motion } from \"motion/react\";\nimport * as React from \"react\";\nimport { useSidekick } from \"./sidekick-provider\";\n\ntype SidekickSidebarProps = {\n  children: React.ReactNode;\n  defaultOpen?: boolean;\n  width?: string | number;\n  position?: \"left\" | \"right\";\n  className?: string;\n  showSearchBar?: boolean;\n  onSearch?: (query: string) => void;\n};\n\nexport function SidekickSidebar({\n  children,\n  defaultOpen = false,\n  width = 420,\n  position = \"right\",\n  className,\n  showSearchBar = true,\n  onSearch,\n}: SidekickSidebarProps) {\n  const [isOpen, setIsOpen] = React.useState(defaultOpen);\n  const [searchQuery, setSearchQuery] = React.useState(\"\");\n  const { messages, addMessage, sendPrompt, isLoading } = useSidekick();\n  const [text, setText] = React.useState(\"\");\n  const scrollRef = React.useRef<HTMLDivElement>(null);\n  const searchInputRef = React.useRef<HTMLInputElement>(null);\n\n  const widthValue = typeof width === \"number\" ? `${width}px` : width;\n\n  React.useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if ((e.metaKey || e.ctrlKey) && e.key === \"k\") {\n        e.preventDefault();\n        setIsOpen((prev) => !prev);\n        if (!isOpen) {\n          setTimeout(() => searchInputRef.current?.focus(), 100);\n        }\n      }\n      if (e.key === \"Escape\" && isOpen) {\n        e.preventDefault();\n        setIsOpen(false);\n      }\n    };\n\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, [isOpen]);\n\n  React.useEffect(() => {\n    if (scrollRef.current) {\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n    }\n  }, [messages]);\n\n  const handleSubmit = React.useCallback(\n    async ({ text }: { text: string; attachments?: File[] }) => {\n      if (!text.trim() || isLoading) return;\n\n      addMessage({ role: \"user\", content: text });\n      setText(\"\");\n\n      try {\n        const response = await sendPrompt(text);\n        addMessage({ role: \"assistant\", content: response });\n      } catch (error) {\n        addMessage({\n          role: \"assistant\",\n          content: \"Sorry, I encountered an error processing your request.\",\n        });\n      }\n    },\n    [isLoading, addMessage, sendPrompt],\n  );\n\n  const handleSearchSubmit = React.useCallback(\n    (e: React.FormEvent) => {\n      e.preventDefault();\n      if (searchQuery.trim()) {\n        onSearch?.(searchQuery);\n        setText(searchQuery);\n        setSearchQuery(\"\");\n      }\n    },\n    [searchQuery, onSearch],\n  );\n\n  return (\n    <div className=\"relative flex h-screen w-full overflow-hidden\">\n      <motion.div\n        className=\"flex-1 h-screen overflow-auto bg-background\"\n        animate={{\n          width: isOpen ? `calc(100% - ${widthValue})` : \"100%\",\n        }}\n        transition={{ type: \"spring\", stiffness: 300, damping: 30 }}\n      >\n        {children}\n      </motion.div>\n\n      <motion.div\n        className={cn(\n          \"fixed top-0 h-screen bg-background border-l shadow-2xl flex flex-col z-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring\",\n          position === \"right\" ? \"right-0\" : \"left-0 border-r border-l-0\",\n          \"w-full sm:w-auto\", // Full width on mobile, auto on larger screens\n          className,\n        )}\n        style={{ width: widthValue }}\n        animate={{\n          x: isOpen ? 0 : position === \"right\" ? \"100%\" : \"-100%\",\n        }}\n        transition={{\n          type: \"spring\",\n          stiffness: 300,\n          damping: 30,\n          duration: window?.matchMedia?.(\"(prefers-reduced-motion: reduce)\")\n            ?.matches\n            ? 0\n            : undefined,\n        }}\n        role=\"complementary\"\n        aria-label=\"AI assistant sidebar\"\n      >\n        {/* Header */}\n        <div className=\"flex items-center justify-between border-b px-4 py-3 shrink-0\">\n          <div className=\"flex items-center gap-2\">\n            <PanelRightIcon\n              className=\"h-5 w-5 text-primary\"\n              aria-hidden=\"true\"\n            />\n            <span className=\"text-base font-semibold\">sidekick/cn</span>\n          </div>\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"h-8 w-8 focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-1\"\n            onClick={() => setIsOpen(false)}\n            aria-label=\"Close sidebar\"\n          >\n            <X className=\"h-4 w-4\" aria-hidden=\"true\" />\n          </Button>\n        </div>\n\n        {/* Search Bar */}\n        {showSearchBar && (\n          <div className=\"shrink-0 border-b p-4\">\n            <form\n              onSubmit={handleSearchSubmit}\n              className=\"relative\"\n              role=\"search\"\n            >\n              <SearchIcon\n                className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\"\n                aria-hidden=\"true\"\n              />\n              <Input\n                ref={searchInputRef}\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                placeholder=\"Search or ask... ⌘K\"\n                className=\"pl-9 pr-4 focus-visible:ring-2 focus-visible:ring-ring\"\n                aria-label=\"Search conversations\"\n              />\n            </form>\n          </div>\n        )}\n\n        {/* Messages */}\n        <ScrollArea className=\"flex-1 px-4\">\n          <div className=\"flex flex-col gap-3 py-4\">\n            {messages.length === 0 && (\n              <Message from=\"assistant\">\n                <MessageContent>\n                  <MessageResponse>\n                    Hi! I'm sidekick/cn, your AI assistant. Use the search bar\n                    above or type below to get started.\n                  </MessageResponse>\n                </MessageContent>\n              </Message>\n            )}\n            {messages.map((message) => (\n              <Message from={message.role} key={message.id}>\n                <MessageContent>\n                  <MessageResponse>{message.content}</MessageResponse>\n                </MessageContent>\n              </Message>\n            ))}\n            {isLoading && (\n              <Message from=\"assistant\">\n                <MessageContent>\n                  <ShimmerLines lines={3} />\n                </MessageContent>\n              </Message>\n            )}\n          </div>\n        </ScrollArea>\n\n        {/* Input */}\n        <div className=\"shrink-0 p-4 border-t\">\n          <PromptInput onSubmit={handleSubmit}>\n            <PromptInputBody>\n              <PromptInputTextarea\n                placeholder=\"Ask me anything...\"\n                onChange={(event) => setText(event.target.value)}\n                value={text}\n                className=\"min-h-[80px] max-h-[200px]\"\n              />\n            </PromptInputBody>\n            <PromptInputFooter className=\"pt-2\">\n              <PromptInputTools />\n              <PromptInputSubmit />\n            </PromptInputFooter>\n          </PromptInput>\n        </div>\n      </motion.div>\n\n      {!isOpen && (\n        <Button\n          size=\"lg\"\n          className={cn(\n            \"fixed top-4 z-40 h-10 px-4 shadow-lg hover:shadow-xl transition-all\",\n            position === \"right\" ? \"right-4\" : \"left-4\",\n          )}\n          onClick={() => setIsOpen(true)}\n        >\n          <PanelRightIcon className=\"h-4 w-4 mr-2\" />\n          sidekick/cn\n          <kbd className=\"ml-2 pointer-events-none inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground opacity-100\">\n            <span className=\"text-xs\">⌘</span>K\n          </kbd>\n        </Button>\n      )}\n    </div>\n  );\n}\n",
      "type": "registry:component"
    }
  ]
}

