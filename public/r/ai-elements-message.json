{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "ai-elements-message",
  "type": "registry:component",
  "title": "AI Message Elements",
  "description": "Message components with branching, versioning, and navigation",
  "dependencies": [
    "lucide-react"
  ],
  "registryDependencies": [
    "button"
  ],
  "files": [
    {
      "path": "src/components/ai-elements/message.tsx",
      "content": "\"use client\";\n\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\nimport { ChevronLeftIcon, ChevronRightIcon } from \"lucide-react\";\nimport * as React from \"react\";\n\n// Message Branch Context\ntype MessageBranchContextValue = {\n  currentBranch: number;\n  totalBranches: number;\n  onBranchChange: (branch: number) => void;\n};\n\nconst MessageBranchContext =\n  React.createContext<MessageBranchContextValue | null>(null);\n\nfunction useMessageBranch() {\n  const context = React.useContext(MessageBranchContext);\n  if (!context) {\n    throw new Error(\"useMessageBranch must be used within MessageBranch\");\n  }\n  return context;\n}\n\n// Message Branch Root\ntype MessageBranchProps = {\n  defaultBranch?: number;\n  children: React.ReactNode;\n};\n\nexport function MessageBranch({\n  defaultBranch = 0,\n  children,\n}: MessageBranchProps) {\n  const [currentBranch, setCurrentBranch] = React.useState(defaultBranch);\n  const [totalBranches, setTotalBranches] = React.useState(1);\n\n  React.useEffect(() => {\n    const branchContent = React.Children.toArray(children).find(\n      (child) =>\n        React.isValidElement(child) && child.type === MessageBranchContent,\n    );\n    if (React.isValidElement(branchContent)) {\n      const element = branchContent as React.ReactElement<{\n        children: React.ReactNode;\n      }>;\n      if (element.props.children) {\n        setTotalBranches(React.Children.count(element.props.children));\n      }\n    }\n  }, [children]);\n\n  return (\n    <MessageBranchContext.Provider\n      value={{\n        currentBranch,\n        totalBranches,\n        onBranchChange: setCurrentBranch,\n      }}\n    >\n      <div className=\"relative\">{children}</div>\n    </MessageBranchContext.Provider>\n  );\n}\n\n// Message Branch Content\ntype MessageBranchContentProps = {\n  children: React.ReactNode;\n};\n\nexport function MessageBranchContent({ children }: MessageBranchContentProps) {\n  const { currentBranch } = useMessageBranch();\n  const childArray = React.Children.toArray(children);\n\n  return <>{childArray[currentBranch]}</>;\n}\n\n// Message Branch Selector\ntype MessageBranchSelectorProps = {\n  from: \"user\" | \"assistant\";\n  children?: React.ReactNode;\n};\n\nexport function MessageBranchSelector({\n  from,\n  children,\n}: MessageBranchSelectorProps) {\n  return (\n    <div\n      className={cn(\n        \"flex items-center gap-2 py-1\",\n        from === \"user\" ? \"justify-end\" : \"justify-start\",\n      )}\n    >\n      {children}\n    </div>\n  );\n}\n\n// Message Branch Navigation\nexport function MessageBranchPrevious() {\n  const { currentBranch, onBranchChange } = useMessageBranch();\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"sm\"\n      onClick={() => onBranchChange(Math.max(0, currentBranch - 1))}\n      disabled={currentBranch === 0}\n    >\n      <ChevronLeftIcon className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous version</span>\n    </Button>\n  );\n}\n\nexport function MessageBranchNext() {\n  const { currentBranch, totalBranches, onBranchChange } = useMessageBranch();\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"sm\"\n      onClick={() =>\n        onBranchChange(Math.min(totalBranches - 1, currentBranch + 1))\n      }\n      disabled={currentBranch === totalBranches - 1}\n    >\n      <ChevronRightIcon className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next version</span>\n    </Button>\n  );\n}\n\nexport function MessageBranchPage() {\n  const { currentBranch, totalBranches } = useMessageBranch();\n\n  return (\n    <span className=\"text-sm text-muted-foreground\">\n      {currentBranch + 1} / {totalBranches}\n    </span>\n  );\n}\n\n// Message Component\ntype MessageProps = {\n  from: \"user\" | \"assistant\";\n  children: React.ReactNode;\n  className?: string;\n};\n\nexport function Message({ from, children, className }: MessageProps) {\n  return (\n    <div\n      className={cn(\n        \"group relative mb-4 flex items-start gap-3 max-w-full\",\n        from === \"user\" ? \"flex-row-reverse\" : \"flex-row\",\n        className,\n      )}\n    >\n      <div\n        className={cn(\n          \"flex h-8 w-8 shrink-0 select-none items-center justify-center rounded-full text-sm font-medium\",\n          from === \"user\"\n            ? \"bg-primary text-primary-foreground\"\n            : \"bg-muted text-muted-foreground\",\n        )}\n      >\n        {from === \"user\" ? \"U\" : \"A\"}\n      </div>\n      <div\n        className={cn(\n          \"flex-1 space-y-2 overflow-hidden rounded-lg px-3 py-2 max-w-[calc(100%-3rem)] sm:px-4\",\n          from === \"user\" ? \"bg-primary/10\" : \"bg-muted/50\",\n        )}\n      >\n        {children}\n      </div>\n    </div>\n  );\n}\n\n// Message Content\ntype MessageContentProps = {\n  children: React.ReactNode;\n  className?: string;\n};\n\nexport function MessageContent({ children, className }: MessageContentProps) {\n  return (\n    <div\n      className={cn(\"prose prose-sm max-w-none dark:prose-invert\", className)}\n    >\n      {children}\n    </div>\n  );\n}\n\n// Message Response (for streaming/markdown)\ntype MessageResponseProps = {\n  children: React.ReactNode;\n};\n\nexport function MessageResponse({ children }: MessageResponseProps) {\n  return <div className=\"whitespace-pre-wrap break-words\">{children}</div>;\n}\n",
      "type": "registry:component"
    }
  ]
}
