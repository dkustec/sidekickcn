{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "sidekick-chat",
  "type": "registry:component",
  "title": "sidekick/cn Chat",
  "description": "Chat with sources, reasoning, suggestions, model selector, and full AI elements",
  "dependencies": [
    "lucide-react"
  ],
  "registryDependencies": [
    "/r/sidekick-provider.json",
    "/r/ai-elements-message.json",
    "/r/ai-elements-conversation.json",
    "/r/ai-elements-sources.json",
    "/r/ai-elements-reasoning.json",
    "/r/ai-elements-suggestion.json",
    "/r/ai-elements-prompt-input.json",
    "/r/ai-elements-model-selector.json",
    "/r/ai-elements-shimmer.json"
  ],
  "files": [
    {
      "path": "src/components/sidekick/sidekick-chat.tsx",
      "content": "\"use client\";\n\nimport {\n  Conversation,\n  ConversationContent,\n  ConversationScrollButton,\n} from \"@/components/ai-elements/conversation\";\nimport {\n  Message,\n  MessageBranch,\n  MessageBranchContent,\n  MessageBranchNext,\n  MessageBranchPage,\n  MessageBranchPrevious,\n  MessageBranchSelector,\n  MessageContent,\n  MessageResponse,\n} from \"@/components/ai-elements/message\";\nimport {\n  PromptInput,\n  PromptInputActionAddAttachments,\n  PromptInputActionMenu,\n  PromptInputActionMenuContent,\n  PromptInputActionMenuTrigger,\n  PromptInputAttachment,\n  PromptInputAttachments,\n  PromptInputBody,\n  PromptInputButton,\n  PromptInputFooter,\n  PromptInputHeader,\n  PromptInputSubmit,\n  PromptInputTextarea,\n  PromptInputTools,\n} from \"@/components/ai-elements/prompt-input\";\nimport {\n  Reasoning,\n  ReasoningContent,\n  ReasoningTrigger,\n} from \"@/components/ai-elements/reasoning\";\nimport { ShimmerLines } from \"@/components/ai-elements/shimmer\";\nimport {\n  Source,\n  Sources,\n  SourcesContent,\n  SourcesTrigger,\n} from \"@/components/ai-elements/sources\";\nimport { Suggestion, Suggestions } from \"@/components/ai-elements/suggestion\";\nimport { cn } from \"@/lib/utils\";\nimport { GlobeIcon, MicIcon } from \"lucide-react\";\nimport * as React from \"react\";\nimport { useSidekick } from \"./sidekick-provider\";\nimport { ModelSelector } from \"../ai-elements/model-selector\";\n\n// Models are now handled dynamically through the ModelSelector\n\ntype SidekickChatProps = {\n  className?: string;\n  showModelSelector?: boolean;\n  showSources?: boolean;\n  showReasoning?: boolean;\n  showSuggestions?: boolean;\n  showAttachments?: boolean;\n  showWebSearch?: boolean;\n  showMicrophone?: boolean;\n  suggestions?: string[];\n  as?: React.ComponentType<any>;\n};\n\nexport function SidekickChat({\n  className,\n  showModelSelector = true,\n  showSources = true,\n  showReasoning = true,\n  showSuggestions = true,\n  showAttachments = true,\n  showWebSearch = false,\n  showMicrophone = false,\n  suggestions: customSuggestions,\n  as: CustomComponent,\n}: SidekickChatProps) {\n  const { messages, addMessage, sendPrompt, isLoading, config } = useSidekick();\n  const [text, setText] = React.useState(\"\");\n  const [selectedModel, setSelectedModel] = React.useState(\n    config.model || \"openai/gpt-4.1\",\n  );\n  const [useWebSearch, setUseWebSearch] = React.useState(false);\n  const [useMicrophone, setUseMicrophone] = React.useState(false);\n\n  const suggestions = customSuggestions || [\n    \"Explain this concept simply\",\n    \"Generate code for this feature\",\n    \"Summarize the key points\",\n    \"What are the best practices?\",\n  ];\n\n  // Model selection is now handled by ModelSelector\n\n  const handleSubmit = React.useCallback(\n    async ({ text, attachments }: { text: string; attachments?: File[] }) => {\n      if (!text.trim() || isLoading) return;\n\n      addMessage({ role: \"user\", content: text });\n      setText(\"\");\n\n      try {\n        const response = await sendPrompt(text, { model: selectedModel });\n        addMessage({\n          role: \"assistant\",\n          content: response,\n          sources: showSources\n            ? [\n                {\n                  title: \"Documentation Reference\",\n                  href: \"https://example.com/docs\",\n                },\n                { title: \"API Guide\", href: \"https://example.com/api\" },\n              ]\n            : undefined,\n          reasoning: showReasoning\n            ? {\n                content:\n                  \"I analyzed the user's request and determined the best approach is to provide a clear, structured response with examples.\",\n                duration: 2.5,\n              }\n            : undefined,\n        });\n      } catch (error) {\n        addMessage({\n          role: \"assistant\",\n          content: \"Sorry, I encountered an error processing your request.\",\n        });\n      }\n    },\n    [\n      isLoading,\n      addMessage,\n      sendPrompt,\n      selectedModel,\n      showSources,\n      showReasoning,\n    ],\n  );\n\n  const handleSuggestionClick = React.useCallback((suggestion: string) => {\n    setText(suggestion);\n  }, []);\n\n  // Allow custom component override\n  if (CustomComponent) {\n    return (\n      <CustomComponent\n        {...{ messages, handleSubmit, isLoading, text, setText }}\n      />\n    );\n  }\n\n  return (\n    <div\n      className={cn(\"flex flex-1 flex-col min-h-0\", className)}\n      role=\"main\"\n      aria-label=\"AI chat conversation\"\n    >\n      <Conversation className=\"flex-1 min-h-0\">\n        <ConversationContent>\n          {messages.map((message) => {\n            const versions = message.versions || [\n              { id: \"1\", content: message.content },\n            ];\n\n            return (\n              <MessageBranch defaultBranch={0} key={message.id}>\n                <MessageBranchContent>\n                  {versions.map((version) => (\n                    <Message\n                      from={message.role}\n                      key={`${message.id}-${version.id}`}\n                    >\n                      <div>\n                        {message.sources?.length && showSources && (\n                          <Sources>\n                            <SourcesTrigger count={message.sources.length} />\n                            <SourcesContent>\n                              {message.sources.map((source) => (\n                                <Source\n                                  href={source.href}\n                                  key={source.href}\n                                  title={source.title}\n                                />\n                              ))}\n                            </SourcesContent>\n                          </Sources>\n                        )}\n                        {message.reasoning && showReasoning && (\n                          <Reasoning duration={message.reasoning.duration}>\n                            <ReasoningTrigger />\n                            <ReasoningContent>\n                              {message.reasoning.content}\n                            </ReasoningContent>\n                          </Reasoning>\n                        )}\n                        <MessageContent>\n                          <MessageResponse>{version.content}</MessageResponse>\n                        </MessageContent>\n                      </div>\n                    </Message>\n                  ))}\n                </MessageBranchContent>\n                {versions.length > 1 && (\n                  <MessageBranchSelector from={message.role}>\n                    <MessageBranchPrevious />\n                    <MessageBranchPage />\n                    <MessageBranchNext />\n                  </MessageBranchSelector>\n                )}\n              </MessageBranch>\n            );\n          })}\n          {isLoading && (\n            <Message from=\"assistant\">\n              <MessageContent>\n                <ShimmerLines lines={3} />\n              </MessageContent>\n            </Message>\n          )}\n        </ConversationContent>\n        <ConversationScrollButton />\n      </Conversation>\n\n      <div className=\"shrink-0 space-y-4 pt-4\">\n        {showSuggestions && messages.length === 0 && (\n          <Suggestions className=\"px-4\">\n            {suggestions.map((suggestion) => (\n              <Suggestion\n                key={suggestion}\n                onClick={() => handleSuggestionClick(suggestion)}\n                suggestion={suggestion}\n              />\n            ))}\n          </Suggestions>\n        )}\n        <div className=\"w-full px-4 pb-4\">\n          <PromptInput globalDrop multiple onSubmit={handleSubmit}>\n            {showAttachments && (\n              <PromptInputHeader>\n                <PromptInputAttachments>\n                  {(attachment, index) => (\n                    <PromptInputAttachment data={attachment} index={index} />\n                  )}\n                </PromptInputAttachments>\n              </PromptInputHeader>\n            )}\n            <PromptInputBody>\n              <PromptInputTextarea\n                onChange={(event) => setText(event.target.value)}\n                value={text}\n              />\n            </PromptInputBody>\n            <PromptInputFooter>\n              <PromptInputTools>\n                {showAttachments && (\n                  <PromptInputActionMenu>\n                    <PromptInputActionMenuTrigger />\n                    <PromptInputActionMenuContent>\n                      <PromptInputActionAddAttachments />\n                    </PromptInputActionMenuContent>\n                  </PromptInputActionMenu>\n                )}\n                {showMicrophone && (\n                  <PromptInputButton\n                    onClick={() => setUseMicrophone(!useMicrophone)}\n                    variant={useMicrophone ? \"default\" : \"ghost\"}\n                  >\n                    <MicIcon size={16} />\n                    <span className=\"sr-only\">Microphone</span>\n                  </PromptInputButton>\n                )}\n                {showWebSearch && (\n                  <PromptInputButton\n                    onClick={() => setUseWebSearch(!useWebSearch)}\n                    variant={useWebSearch ? \"default\" : \"ghost\"}\n                  >\n                    <GlobeIcon size={16} />\n                    <span>Search</span>\n                  </PromptInputButton>\n                )}\n                {showModelSelector && (\n                  <ModelSelector\n                    selectedModel={selectedModel}\n                    onModelChange={setSelectedModel}\n                    config={config.modelConfig}\n                  />\n                )}\n              </PromptInputTools>\n              <PromptInputSubmit />\n            </PromptInputFooter>\n          </PromptInput>\n        </div>\n      </div>\n    </div>\n  );\n}\n",
      "type": "registry:component"
    }
  ]
}

