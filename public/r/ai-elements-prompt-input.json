{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "ai-elements-prompt-input",
  "type": "registry:component",
  "title": "AI Prompt Input Elements",
  "description": "Composable prompt input with attachments, tools, and actions",
  "dependencies": [
    "lucide-react"
  ],
  "registryDependencies": [
    "button",
    "textarea",
    "dropdown-menu"
  ],
  "files": [
    {
      "path": "src/components/ai-elements/prompt-input.tsx",
      "content": "\"use client\";\n\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { cn } from \"@/lib/utils\";\nimport { PaperclipIcon, SendIcon, XIcon } from \"lucide-react\";\nimport * as React from \"react\";\n\nexport type PromptInputMessage = {\n  text: string;\n  attachments?: File[];\n};\n\ntype PromptInputContextValue = {\n  attachments: File[];\n  addAttachments: (files: File[]) => void;\n  removeAttachment: (index: number) => void;\n  multiple?: boolean;\n  globalDrop?: boolean;\n};\n\nconst PromptInputContext = React.createContext<PromptInputContextValue | null>(\n  null,\n);\n\nfunction usePromptInput() {\n  const context = React.useContext(PromptInputContext);\n  if (!context) {\n    throw new Error(\"usePromptInput must be used within PromptInput\");\n  }\n  return context;\n}\n\ntype PromptInputProps = {\n  children: React.ReactNode;\n  onSubmit?: (message: PromptInputMessage) => void;\n  multiple?: boolean;\n  globalDrop?: boolean;\n  className?: string;\n};\n\nexport function PromptInput({\n  children,\n  onSubmit,\n  multiple = false,\n  globalDrop = false,\n  className,\n}: PromptInputProps) {\n  const [attachments, setAttachments] = React.useState<File[]>([]);\n\n  const addAttachments = React.useCallback(\n    (files: File[]) => {\n      if (multiple) {\n        setAttachments((prev) => [...prev, ...files]);\n      } else {\n        setAttachments(files.slice(0, 1));\n      }\n    },\n    [multiple],\n  );\n\n  const removeAttachment = React.useCallback((index: number) => {\n    setAttachments((prev) => prev.filter((_, i) => i !== index));\n  }, []);\n\n  return (\n    <PromptInputContext.Provider\n      value={{\n        attachments,\n        addAttachments,\n        removeAttachment,\n        multiple,\n        globalDrop,\n      }}\n    >\n      <form\n        onSubmit={(e) => {\n          e.preventDefault();\n          const formData = new FormData(e.currentTarget);\n          const text = formData.get(\"prompt\") as string;\n          onSubmit?.({ text, attachments });\n          setAttachments([]);\n        }}\n        className={cn(\"relative rounded-lg border bg-background\", className)}\n      >\n        {children}\n      </form>\n    </PromptInputContext.Provider>\n  );\n}\n\ntype PromptInputHeaderProps = {\n  children?: React.ReactNode;\n};\n\nexport function PromptInputHeader({ children }: PromptInputHeaderProps) {\n  return <div className=\"border-b p-2\">{children}</div>;\n}\n\ntype PromptInputBodyProps = {\n  children: React.ReactNode;\n};\n\nexport function PromptInputBody({ children }: PromptInputBodyProps) {\n  return <div className=\"p-2\">{children}</div>;\n}\n\ntype PromptInputFooterProps = {\n  children: React.ReactNode;\n  className?: string;\n};\n\nexport function PromptInputFooter({\n  children,\n  className,\n}: PromptInputFooterProps) {\n  return (\n    <div\n      className={cn(\n        \"flex items-center justify-between border-t p-2\",\n        className,\n      )}\n    >\n      {children}\n    </div>\n  );\n}\n\ntype PromptInputTextareaProps =\n  React.TextareaHTMLAttributes<HTMLTextAreaElement>;\n\nexport function PromptInputTextarea({\n  className,\n  ...props\n}: PromptInputTextareaProps) {\n  return (\n    <Textarea\n      name=\"prompt\"\n      placeholder=\"Type your message...\"\n      className={cn(\n        \"min-h-[60px] resize-none border-0 p-0 focus-visible:ring-0\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\ntype PromptInputToolsProps = {\n  children?: React.ReactNode;\n};\n\nexport function PromptInputTools({ children }: PromptInputToolsProps) {\n  return <div className=\"flex items-center gap-2\">{children || null}</div>;\n}\n\ntype PromptInputButtonProps = React.ComponentProps<typeof Button>;\n\nexport function PromptInputButton({\n  children,\n  ...props\n}: PromptInputButtonProps) {\n  return (\n    <Button variant=\"ghost\" size=\"sm\" type=\"button\" {...props}>\n      {children}\n    </Button>\n  );\n}\n\nexport function PromptInputSubmit() {\n  return (\n    <Button type=\"submit\" size=\"sm\" className=\"ml-auto\">\n      <SendIcon className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Send message</span>\n    </Button>\n  );\n}\n\ntype PromptInputAttachmentsProps = {\n  children: (attachment: File, index: number) => React.ReactNode;\n};\n\nexport function PromptInputAttachments({\n  children,\n}: PromptInputAttachmentsProps) {\n  const { attachments } = usePromptInput();\n\n  if (attachments.length === 0) return null;\n\n  return (\n    <div className=\"flex flex-wrap gap-2\">\n      {attachments.map((attachment, index) => children(attachment, index))}\n    </div>\n  );\n}\n\ntype PromptInputAttachmentProps = {\n  data: File;\n  index?: number;\n};\n\nexport function PromptInputAttachment({\n  data,\n  index = 0,\n}: PromptInputAttachmentProps) {\n  const { removeAttachment } = usePromptInput();\n\n  return (\n    <div className=\"flex items-center gap-2 rounded-md border bg-muted px-3 py-1 text-sm max-w-full\">\n      <PaperclipIcon className=\"h-3 w-3 shrink-0\" />\n      <span className=\"flex-1 min-w-0 truncate\">{data.name}</span>\n      <button\n        type=\"button\"\n        onClick={() => removeAttachment(index)}\n        className=\"ml-auto shrink-0 hover:text-destructive transition-colors\"\n        aria-label={`Remove ${data.name}`}\n      >\n        <XIcon className=\"h-3 w-3\" />\n      </button>\n    </div>\n  );\n}\n\nexport function PromptInputActionMenu({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  return <DropdownMenu>{children}</DropdownMenu>;\n}\n\nexport function PromptInputActionMenuTrigger() {\n  return (\n    <DropdownMenuTrigger asChild>\n      <Button variant=\"ghost\" size=\"sm\" type=\"button\">\n        <PaperclipIcon className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Add attachments</span>\n      </Button>\n    </DropdownMenuTrigger>\n  );\n}\n\nexport function PromptInputActionMenuContent({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  return <DropdownMenuContent>{children}</DropdownMenuContent>;\n}\n\nexport function PromptInputActionAddAttachments() {\n  const { addAttachments, multiple } = usePromptInput();\n  const inputRef = React.useRef<HTMLInputElement>(null);\n\n  return (\n    <>\n      <button\n        type=\"button\"\n        className=\"flex w-full items-center gap-2 rounded-sm px-2 py-1.5 text-sm hover:bg-muted\"\n        onClick={() => inputRef.current?.click()}\n      >\n        <PaperclipIcon className=\"h-4 w-4\" />\n        <span>Add files</span>\n      </button>\n      <input\n        ref={inputRef}\n        type=\"file\"\n        multiple={multiple}\n        className=\"hidden\"\n        onChange={(e) => {\n          if (e.target.files) {\n            addAttachments(Array.from(e.target.files));\n          }\n        }}\n      />\n    </>\n  );\n}\n",
      "type": "registry:component"
    }
  ]
}
